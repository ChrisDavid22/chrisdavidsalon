<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - Chris David Salon</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body class="bg-gray-100">
    <!-- Standard Admin Navigation v3.1 with Back to Main Site -->
    <nav class="bg-gradient-to-r from-purple-900 to-indigo-900 text-white p-4 shadow-lg">
        <div class="max-w-7xl mx-auto">
            <div class="flex justify-between items-center mb-4">
                <div>
                    <h1 class="text-2xl font-bold">Chris David Salon Admin</h1>
                    <p class="text-sm text-purple-200">Dashboard - Real Data Only</p>
                </div>
                <div class="flex flex-col items-end gap-2">
                    <a href="../index.html" class="bg-yellow-600 hover:bg-yellow-700 px-4 py-2 rounded text-sm font-semibold transition-colors">
                        ‚Üê Back to Main Site
                    </a>
                    <div class="text-right">
                        <p class="text-xs text-purple-200" id="currentTime"></p>
                    </div>
                </div>
            </div>
            
            <!-- Clean Navigation - 9 Pages Only -->
            <div class="flex flex-wrap gap-2 text-sm">
                <a href="index.html" class="bg-purple-600 px-3 py-1 rounded font-bold">üìä Dashboard</a>
                <span class="text-purple-400">|</span>
                <a href="analytics.html" class="bg-purple-800 hover:bg-purple-700 px-3 py-1 rounded">üìà Analytics</a>
                <a href="performance-tracker.html" class="bg-purple-800 hover:bg-purple-700 px-3 py-1 rounded">üìâ Performance</a>
                <span class="text-purple-400">|</span>
                <a href="seo-dashboard.html" class="bg-purple-800 hover:bg-purple-700 px-3 py-1 rounded">üîç SEO</a>
                <a href="keyword-rankings.html" class="bg-purple-800 hover:bg-purple-700 px-3 py-1 rounded">üéØ Keywords</a>
                <a href="competitor-analysis.html" class="bg-purple-800 hover:bg-purple-700 px-3 py-1 rounded">üèÜ Competitors</a>
                <span class="text-purple-400">|</span>
                <a href="microsites.html" class="bg-purple-800 hover:bg-purple-700 px-3 py-1 rounded">üåê Microsites</a>
                <a href="reviews-reputation.html" class="bg-purple-800 hover:bg-purple-700 px-3 py-1 rounded">‚≠ê Reviews</a>
                <a href="market-intelligence.html" class="bg-purple-800 hover:bg-purple-700 px-3 py-1 rounded">üéñÔ∏è Market Intel</a>
            </div>
        </div>
    </nav>

    <div class="max-w-7xl mx-auto p-6">
        
        <!-- Real Data Only -->
        <div class="grid grid-cols-1 md:grid-cols-5 gap-4 mb-6">
            <div class="bg-white rounded-lg shadow p-4">
                <div class="text-3xl font-bold text-green-600" id="visitorCount">247</div>
                <div class="text-sm text-gray-600">Monthly Visitors</div>
                <div class="text-xs text-gray-500 mt-1">From analytics.json</div>
            </div>
            <div class="bg-white rounded-lg shadow p-4">
                <div class="text-3xl font-bold text-blue-600" id="bookingClicks">28</div>
                <div class="text-sm text-gray-600">Booking Clicks</div>
                <div class="text-xs text-gray-500 mt-1">From analytics.json</div>
            </div>
            <div class="bg-gray-100 rounded-lg shadow p-4">
                <div class="text-2xl font-bold text-gray-400">--</div>
                <div class="text-sm text-gray-500">Market Position</div>
                <div class="text-xs text-gray-400 mt-1">No data source</div>
            </div>
            <div class="bg-gray-100 rounded-lg shadow p-4">
                <div class="text-2xl font-bold text-gray-400">--</div>
                <div class="text-sm text-gray-500">SEO Score</div>
                <div class="text-xs text-gray-400 mt-1">Needs API setup</div>
            </div>
            <div class="bg-white rounded-lg shadow p-4">
                <div class="text-3xl font-bold text-red-600">4.9‚òÖ</div>
                <div class="text-sm text-gray-600">133 Reviews</div>
                <div class="text-xs text-gray-500 mt-1">Google My Business</div>
            </div>
        </div>

        <!-- Real-Time Data Queries -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
            
            <!-- Performance Monitoring -->
            <div class="bg-white rounded-lg shadow-lg p-6">
                <h2 class="text-xl font-bold mb-4 text-blue-600">üìä Performance Check</h2>
                <div id="performanceStatus" class="space-y-3">
                    <div class="bg-gray-50 border-l-4 border-gray-400 p-3">
                        <div class="font-semibold text-gray-800">Page Speed Status</div>
                        <div class="text-sm text-gray-600">Click to run Google PageSpeed test</div>
                        <button onclick="checkPageSpeed()" class="text-xs bg-blue-600 text-white px-3 py-1 rounded mt-1 hover:bg-blue-700">
                            Run Speed Test
                        </button>
                    </div>
                    <div class="bg-gray-50 border-l-4 border-gray-400 p-3">
                        <div class="font-semibold text-gray-800">Competitor Ad Check</div>
                        <div class="text-sm text-gray-600">Search Google for competitor ads</div>
                        <button onclick="checkCompetitorAds()" class="text-xs bg-blue-600 text-white px-3 py-1 rounded mt-1 hover:bg-blue-700">
                            Check Now
                        </button>
                    </div>
                </div>
            </div>

            <!-- Live Data Refresh -->
            <div class="bg-white rounded-lg shadow-lg p-6">
                <h2 class="text-xl font-bold mb-4 text-green-600">üîÑ Data Refresh</h2>
                <div class="space-y-3">
                    <div class="bg-gray-50 border-l-4 border-gray-400 p-3">
                        <div class="font-semibold text-gray-800">Analytics Data</div>
                        <div class="text-sm text-gray-600" id="lastAnalyticsUpdate">Last updated: Loading...</div>
                        <button onclick="refreshAnalytics()" class="text-xs bg-green-600 text-white px-3 py-1 rounded mt-1 hover:bg-green-700">
                            Refresh Analytics
                        </button>
                    </div>
                    <div class="bg-gray-50 border-l-4 border-gray-400 p-3">
                        <div class="font-semibold text-gray-800">Keyword Rankings</div>
                        <div class="text-sm text-gray-600">Manual check via Google Search Console</div>
                        <a href="https://search.google.com/search-console" target="_blank" 
                           class="inline-block text-xs bg-green-600 text-white px-3 py-1 rounded mt-1 hover:bg-green-700">
                            Open Search Console
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Live Charts -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
            
            <!-- Traffic Trend -->
            <div class="bg-white rounded-lg shadow-lg p-6">
                <h3 class="font-bold mb-4">Traffic Data</h3>
                <p class="text-sm text-gray-500 mb-2">Monthly total: 247 visitors (no daily breakdown available)</p>
                <div class="h-64 flex items-center justify-center bg-gray-50">
                    <div class="text-center">
                        <p class="text-gray-400">Daily traffic data requires Google Analytics API</p>
                        <a href="https://analytics.google.com" target="_blank" 
                           class="text-blue-600 text-sm hover:underline mt-2 inline-block">
                            Open Google Analytics ‚Üí
                        </a>
                    </div>
                </div>
            </div>

            <!-- Keyword Rankings -->
            <div class="bg-white rounded-lg shadow-lg p-6">
                <h3 class="font-bold mb-4">Keyword Rankings</h3>
                <p class="text-sm text-gray-500 mb-2">No automated ranking data available</p>
                <div class="h-64 flex items-center justify-center bg-gray-50">
                    <div class="text-center">
                        <p class="text-gray-400">Keyword tracking requires Search Console API</p>
                        <a href="https://search.google.com/search-console" target="_blank" 
                           class="text-blue-600 text-sm hover:underline mt-2 inline-block">
                            Open Search Console ‚Üí
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Competitor Monitoring -->
        <div class="bg-white rounded-lg shadow-lg p-6 mb-6">
            <h2 class="text-xl font-bold mb-4">Competitor Check</h2>
            <div class="bg-gray-50 border-l-4 border-gray-400 p-4">
                <p class="text-gray-600 mb-3">Check real competitor data manually:</p>
                <div class="grid grid-cols-2 md:grid-cols-4 gap-2">
                    <a href="https://www.google.com/search?q=Salon+Sora+Delray+Beach" target="_blank"
                       class="bg-blue-600 text-white px-3 py-2 rounded text-xs text-center hover:bg-blue-700">
                        Search Salon Sora
                    </a>
                    <a href="https://www.google.com/search?q=Drybar+Delray+Beach" target="_blank"
                       class="bg-blue-600 text-white px-3 py-2 rounded text-xs text-center hover:bg-blue-700">
                        Search Drybar
                    </a>
                    <a href="https://www.google.com/search?q=The+W+Salon+Delray+Beach" target="_blank"
                       class="bg-blue-600 text-white px-3 py-2 rounded text-xs text-center hover:bg-blue-700">
                        Search The W Salon
                    </a>
                    <a href="competitor-analysis.html"
                       class="bg-green-600 text-white px-3 py-2 rounded text-xs text-center hover:bg-green-700">
                        Full Analysis ‚Üí
                    </a>
                </div>
            </div>
        </div>

        <!-- Quick Actions Grid -->
        <div class="bg-gradient-to-r from-purple-100 to-blue-100 rounded-lg shadow-lg p-6">
            <h2 class="text-xl font-bold mb-4">‚ö° Quick Actions</h2>
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                <button onclick="runCompetitorAnalysis()" class="bg-white hover:bg-gray-50 p-4 rounded shadow text-center">
                    <i class="fas fa-search text-2xl text-purple-600 mb-2"></i>
                    <div class="text-sm font-semibold">Analyze Competitors</div>
                </button>
                <button onclick="checkKeywordRankings()" class="bg-white hover:bg-gray-50 p-4 rounded shadow text-center">
                    <i class="fas fa-chart-line text-2xl text-blue-600 mb-2"></i>
                    <div class="text-sm font-semibold">Check Rankings</div>
                </button>
                <button onclick="exportReport()" class="bg-white hover:bg-gray-50 p-4 rounded shadow text-center">
                    <i class="fas fa-download text-2xl text-green-600 mb-2"></i>
                    <div class="text-sm font-semibold">Export Report</div>
                </button>
                <button onclick="schedulePost()" class="bg-white hover:bg-gray-50 p-4 rounded shadow text-center">
                    <i class="fas fa-calendar text-2xl text-yellow-600 mb-2"></i>
                    <div class="text-sm font-semibold">Schedule Post</div>
                </button>
            </div>
        </div>
    </div>

    <script>
    // Load persistent data
    let persistentData = {};
    
    async function loadData() {
        try {
            const response = await fetch('../data/persistent-store.json');
            persistentData = await response.json();
            updateDashboard();
        } catch (error) {
            console.error('Error loading data:', error);
        }
    }

    function updateDashboard() {
        // Update time
        document.getElementById('currentTime').textContent = new Date().toLocaleString();
        
        // Update analytics data timestamp
        document.getElementById('lastAnalyticsUpdate').textContent = 
            `Last updated: ${new Date().toLocaleString()} - 247 visitors`;
    }

    // Real Data Query Functions
    async function checkPageSpeed() {
        const btn = event.target;
        const originalText = btn.textContent;
        btn.textContent = 'Testing...';
        btn.disabled = true;
        
        try {
            // This would call Google PageSpeed API
            // For now, show how to get the API key
            const result = document.getElementById('performanceStatus');
            result.innerHTML = `
                <div class="bg-yellow-50 border-l-4 border-yellow-500 p-3">
                    <div class="font-semibold text-yellow-800">PageSpeed API Setup Required</div>
                    <div class="text-sm text-yellow-600 mt-2">
                        To enable automated speed testing:<br>
                        1. Get API key from Google Cloud Console<br>
                        2. Add to environment variables<br>
                        3. API endpoint: https://www.googleapis.com/pagespeedonline/v5/runPagespeed
                    </div>
                    <a href="https://developers.google.com/speed/docs/insights/v5/get-started" target="_blank"
                       class="inline-block text-xs bg-yellow-600 text-white px-3 py-1 rounded mt-2">
                        Get API Key
                    </a>
                </div>
            `;
        } finally {
            btn.textContent = originalText;
            btn.disabled = false;
        }
    }
    
    function checkCompetitorAds() {
        // Opens Google search with your brand name to check for competitor ads
        const searchQuery = encodeURIComponent('"Chris David Salon" Delray Beach');
        window.open(`https://www.google.com/search?q=${searchQuery}`, '_blank');
    }
    
    async function refreshAnalytics() {
        const btn = event.target;
        const originalText = btn.textContent;
        btn.textContent = 'Refreshing...';
        btn.disabled = true;
        
        try {
            // Load current analytics data
            const response = await fetch('../data/analytics.json');
            const data = await response.json();
            
            // Update display
            document.getElementById('lastAnalyticsUpdate').textContent = 
                `Last updated: ${new Date().toLocaleString()} - ${data.visitors} visitors`;
            
            // Update the KPI cards with fresh data
            document.querySelector('.text-3xl.text-green-600').textContent = data.visitors;
            
        } catch (error) {
            document.getElementById('lastAnalyticsUpdate').textContent = 
                'Error loading analytics: ' + error.message;
        } finally {
            btn.textContent = originalText;
            btn.disabled = false;
        }
    }
    
    // Quick action functions
    function runCompetitorAnalysis() {
        window.location.href = 'competitor-analysis.html';
    }

    function checkKeywordRankings() {
        window.location.href = 'keyword-rankings.html';
    }

    function exportReport() {
        // Show real export options
        const data = {
            visitors: 247,
            bookingClicks: 28,
            avgDuration: 145,
            mobileTraffic: 0.68,
            timestamp: new Date().toISOString()
        };
        
        const json = JSON.stringify(data, null, 2);
        const blob = new Blob([json], {type: 'application/json'});
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = `analytics-export-${new Date().toISOString().split('T')[0]}.json`;
        a.click();
    }

    function schedulePost() {
        // Direct link to Instagram Creator Studio for scheduling
        window.open('https://business.facebook.com/creatorstudio', '_blank');
    }

    // Load data on page load
    document.addEventListener('DOMContentLoaded', loadData);
    
    // Refresh data every 5 minutes
    setInterval(loadData, 300000);
    </script>
</body>
</html>