<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - Chris David Salon</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body class="bg-gray-100">
    <!-- Standard Admin Navigation v3.0.0 -->
    <nav class="bg-gradient-to-r from-purple-900 to-indigo-900 text-white p-4 shadow-lg">
        <div class="max-w-7xl mx-auto">
            <div class="flex justify-between items-center mb-4">
                <div>
                    <h1 class="text-2xl font-bold">Chris David Salon Admin v3.0</h1>
                    <p class="text-sm text-purple-200">Executive Dashboard</p>
                </div>
                <div class="text-right">
                    <p class="text-xs text-green-400">üü¢ All Systems Operational</p>
                    <p class="text-xs text-purple-200" id="currentTime"></p>
                </div>
            </div>
            
            <!-- Clean Navigation - 9 Pages Only -->
            <div class="flex flex-wrap gap-2 text-sm">
                <a href="index.html" class="bg-purple-600 px-3 py-1 rounded font-bold">üìä Dashboard</a>
                <span class="text-purple-400">|</span>
                <a href="analytics.html" class="bg-purple-800 hover:bg-purple-700 px-3 py-1 rounded">üìà Analytics</a>
                <a href="performance-tracker.html" class="bg-purple-800 hover:bg-purple-700 px-3 py-1 rounded">üìâ Performance</a>
                <span class="text-purple-400">|</span>
                <a href="seo-dashboard.html" class="bg-purple-800 hover:bg-purple-700 px-3 py-1 rounded">üîç SEO</a>
                <a href="keyword-rankings.html" class="bg-purple-800 hover:bg-purple-700 px-3 py-1 rounded">üéØ Keywords</a>
                <a href="competitor-analysis.html" class="bg-purple-800 hover:bg-purple-700 px-3 py-1 rounded">üèÜ Competitors</a>
                <span class="text-purple-400">|</span>
                <a href="microsites.html" class="bg-purple-800 hover:bg-purple-700 px-3 py-1 rounded">üåê Microsites</a>
                <a href="reviews-reputation.html" class="bg-purple-800 hover:bg-purple-700 px-3 py-1 rounded">‚≠ê Reviews</a>
                <a href="market-intelligence.html" class="bg-purple-800 hover:bg-purple-700 px-3 py-1 rounded">üéñÔ∏è Market Intel</a>
            </div>
        </div>
    </nav>

    <div class="max-w-7xl mx-auto p-6">
        
        <!-- Top KPIs -->
        <div class="grid grid-cols-1 md:grid-cols-5 gap-4 mb-6">
            <div class="bg-white rounded-lg shadow p-4">
                <div class="text-3xl font-bold text-green-600">247</div>
                <div class="text-sm text-gray-600">Monthly Visitors</div>
                <div class="text-xs text-green-500 mt-1">‚Üë 18% vs last month</div>
            </div>
            <div class="bg-white rounded-lg shadow p-4">
                <div class="text-3xl font-bold text-blue-600">11.3%</div>
                <div class="text-sm text-gray-600">Conversion Rate</div>
                <div class="text-xs text-green-500 mt-1">‚Üë 2.1% vs last month</div>
            </div>
            <div class="bg-white rounded-lg shadow p-4">
                <div class="text-3xl font-bold text-purple-600">#15</div>
                <div class="text-sm text-gray-600">Market Position</div>
                <div class="text-xs text-green-500 mt-1">‚Üë 5 positions</div>
            </div>
            <div class="bg-white rounded-lg shadow p-4">
                <div class="text-3xl font-bold text-yellow-600">83</div>
                <div class="text-sm text-gray-600">SEO Score</div>
                <div class="text-xs text-green-500 mt-1">‚Üë 6 points</div>
            </div>
            <div class="bg-white rounded-lg shadow p-4">
                <div class="text-3xl font-bold text-red-600">4.9‚òÖ</div>
                <div class="text-sm text-gray-600">133 Reviews</div>
                <div class="text-xs text-green-500 mt-1">+8 this month</div>
            </div>
        </div>

        <!-- Quick Actions & Alerts -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
            
            <!-- Critical Alerts -->
            <div class="bg-white rounded-lg shadow-lg p-6">
                <h2 class="text-xl font-bold mb-4 text-red-600">üö® Critical Alerts</h2>
                <div class="space-y-3">
                    <div class="bg-red-50 border-l-4 border-red-500 p-3">
                        <div class="font-semibold text-red-800">Competitor Alert</div>
                        <div class="text-sm text-red-600">Salon Sora running ads on your brand name</div>
                        <button class="text-xs bg-red-600 text-white px-2 py-1 rounded mt-1">Counter Now</button>
                    </div>
                    <div class="bg-orange-50 border-l-4 border-orange-500 p-3">
                        <div class="font-semibold text-orange-800">SEO Issue</div>
                        <div class="text-sm text-orange-600">Page speed dropped below 3s threshold</div>
                        <button class="text-xs bg-orange-600 text-white px-2 py-1 rounded mt-1">Fix Now</button>
                    </div>
                </div>
            </div>

            <!-- Opportunities -->
            <div class="bg-white rounded-lg shadow-lg p-6">
                <h2 class="text-xl font-bold mb-4 text-green-600">üí° Opportunities</h2>
                <div class="space-y-3">
                    <div class="bg-green-50 border-l-4 border-green-500 p-3">
                        <div class="font-semibold text-green-800">Ranking Opportunity</div>
                        <div class="text-sm text-green-600">"best colorist delray" - 2 spots from #1</div>
                        <button class="text-xs bg-green-600 text-white px-2 py-1 rounded mt-1">Optimize</button>
                    </div>
                    <div class="bg-blue-50 border-l-4 border-blue-500 p-3">
                        <div class="font-semibold text-blue-800">Review Request</div>
                        <div class="text-sm text-blue-600">17 happy clients haven't reviewed yet</div>
                        <button class="text-xs bg-blue-600 text-white px-2 py-1 rounded mt-1">Send Requests</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Live Charts -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
            
            <!-- Traffic Trend -->
            <div class="bg-white rounded-lg shadow-lg p-6">
                <h3 class="font-bold mb-4">Traffic Trend (7 Days)</h3>
                <div class="h-64">
                    <canvas id="trafficChart"></canvas>
                </div>
            </div>

            <!-- Keyword Rankings -->
            <div class="bg-white rounded-lg shadow-lg p-6">
                <h3 class="font-bold mb-4">Top Keywords Movement</h3>
                <div class="h-64">
                    <canvas id="keywordChart"></canvas>
                </div>
            </div>
        </div>

        <!-- Competitor Snapshot -->
        <div class="bg-white rounded-lg shadow-lg p-6 mb-6">
            <h2 class="text-xl font-bold mb-4">Competitor Snapshot</h2>
            <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                <div class="border rounded p-3">
                    <div class="font-semibold">You</div>
                    <div class="text-2xl font-bold text-green-600">83</div>
                    <div class="text-xs text-gray-500">Overall Score</div>
                </div>
                <div class="border rounded p-3">
                    <div class="font-semibold">Salon Sora</div>
                    <div class="text-2xl font-bold text-red-600">85</div>
                    <div class="text-xs text-gray-500">Leading by 2</div>
                </div>
                <div class="border rounded p-3">
                    <div class="font-semibold">Drybar</div>
                    <div class="text-2xl font-bold text-yellow-600">78</div>
                    <div class="text-xs text-gray-500">You lead by 5</div>
                </div>
                <div class="border rounded p-3">
                    <div class="font-semibold">The W Salon</div>
                    <div class="text-2xl font-bold text-green-600">71</div>
                    <div class="text-xs text-gray-500">You lead by 12</div>
                </div>
            </div>
        </div>

        <!-- Quick Actions Grid -->
        <div class="bg-gradient-to-r from-purple-100 to-blue-100 rounded-lg shadow-lg p-6">
            <h2 class="text-xl font-bold mb-4">‚ö° Quick Actions</h2>
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                <button onclick="runCompetitorAnalysis()" class="bg-white hover:bg-gray-50 p-4 rounded shadow text-center">
                    <i class="fas fa-search text-2xl text-purple-600 mb-2"></i>
                    <div class="text-sm font-semibold">Analyze Competitors</div>
                </button>
                <button onclick="checkKeywordRankings()" class="bg-white hover:bg-gray-50 p-4 rounded shadow text-center">
                    <i class="fas fa-chart-line text-2xl text-blue-600 mb-2"></i>
                    <div class="text-sm font-semibold">Check Rankings</div>
                </button>
                <button onclick="exportReport()" class="bg-white hover:bg-gray-50 p-4 rounded shadow text-center">
                    <i class="fas fa-download text-2xl text-green-600 mb-2"></i>
                    <div class="text-sm font-semibold">Export Report</div>
                </button>
                <button onclick="schedulePost()" class="bg-white hover:bg-gray-50 p-4 rounded shadow text-center">
                    <i class="fas fa-calendar text-2xl text-yellow-600 mb-2"></i>
                    <div class="text-sm font-semibold">Schedule Post</div>
                </button>
            </div>
        </div>
    </div>

    <script>
    // Load persistent data
    let persistentData = {};
    
    async function loadData() {
        try {
            const response = await fetch('../data/persistent-store.json');
            persistentData = await response.json();
            updateDashboard();
        } catch (error) {
            console.error('Error loading data:', error);
        }
    }

    function updateDashboard() {
        // Update time
        document.getElementById('currentTime').textContent = new Date().toLocaleString();
        
        // Initialize charts with real data
        initTrafficChart();
        initKeywordChart();
    }

    function initTrafficChart() {
        const ctx = document.getElementById('trafficChart').getContext('2d');
        new Chart(ctx, {
            type: 'line',
            data: {
                labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
                datasets: [{
                    label: 'Visitors',
                    data: [32, 28, 35, 41, 38, 45, 52],
                    borderColor: 'rgb(59, 130, 246)',
                    tension: 0.4
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        display: false
                    }
                }
            }
        });
    }

    function initKeywordChart() {
        const ctx = document.getElementById('keywordChart').getContext('2d');
        
        // Use real keyword data from persistent store
        const latestDate = Object.keys(persistentData.keywordRankings || {}).sort().pop();
        const keywords = persistentData.keywordRankings?.[latestDate] || {};
        
        new Chart(ctx, {
            type: 'bar',
            data: {
                labels: Object.keys(keywords).slice(0, 5),
                datasets: [{
                    label: 'Position',
                    data: Object.values(keywords).slice(0, 5),
                    backgroundColor: 'rgba(168, 85, 247, 0.5)'
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        reverse: true,
                        min: 1,
                        max: 20
                    }
                },
                plugins: {
                    legend: {
                        display: false
                    }
                }
            }
        });
    }

    // Quick action functions
    function runCompetitorAnalysis() {
        window.location.href = 'competitor-analysis.html';
    }

    function checkKeywordRankings() {
        window.location.href = 'keyword-rankings.html';
    }

    function exportReport() {
        alert('Report export will be implemented with Boulevard API integration');
    }

    function schedulePost() {
        alert('Social media scheduling will be integrated with Instagram API');
    }

    // Load data on page load
    document.addEventListener('DOMContentLoaded', loadData);
    
    // Refresh data every 5 minutes
    setInterval(loadData, 300000);
    </script>
</body>
</html>