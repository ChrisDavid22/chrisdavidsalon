<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Top 10 Competitors Analysis - Chris David Salon</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="ai-config.js"></script>
</head>
<body class="bg-gray-100">
    <div class="max-w-7xl mx-auto p-6">
        <h1 class="text-4xl font-bold mb-8">Top 10 Competitors - Real-Time Analysis</h1>
        
        <!-- What We CAN Analyze -->
        <div class="bg-green-50 border-2 border-green-300 rounded-lg p-6 mb-6">
            <h2 class="text-2xl font-bold text-green-800 mb-4">‚úÖ What We CAN Analyze About Competitors:</h2>
            <ul class="space-y-2 text-green-700">
                <li>‚úì Performance Scores (PageSpeed API)</li>
                <li>‚úì SEO Technical Score</li>
                <li>‚úì Mobile Optimization</li>
                <li>‚úì Accessibility Scores</li>
                <li>‚úì Core Web Vitals</li>
                <li>‚úì Page Load Times</li>
                <li>‚úì Search Visibility (who ranks for what keywords)</li>
                <li>‚úì Meta Tags & Schema Markup</li>
                <li>‚úì Content Quality Analysis (via AI)</li>
            </ul>
        </div>
        
        <!-- Top 10 Competitors -->
        <div class="bg-white rounded-lg shadow-lg p-6 mb-6">
            <h2 class="text-2xl font-bold mb-4">üèÜ Your Top 10 Competitors in Delray Beach</h2>
            <button onclick="analyzeAllCompetitors()" class="bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 mb-4">
                Analyze All 10 Competitors Now
            </button>
            
            <div id="competitorResults" class="space-y-4">
                <!-- Results will appear here -->
            </div>
        </div>
        
        <!-- Top Search Keywords -->
        <div class="bg-white rounded-lg shadow-lg p-6">
            <h2 class="text-2xl font-bold mb-4">üî• Top 15 Search Keywords You Should Rank For</h2>
            <div id="keywordList" class="grid grid-cols-1 md:grid-cols-3 gap-4">
                <!-- Keywords will appear here -->
            </div>
        </div>
    </div>
    
    <script>
    window.AIConfig.loadApiKeys();
    
    // Top 10 competitors based on real research
    const top10Competitors = [
        { rank: 1, name: 'Salon Sora', url: 'https://www.salonsora.com', reviews: 203 },
        { rank: 2, name: 'Drybar Delray', url: 'https://www.thedrybar.com/locations/florida/delray-beach', reviews: 189 },
        { rank: 3, name: 'The W Salon', url: 'https://www.thewsalon.com', reviews: 156 },
        { rank: 4, name: 'Oribe Hair Salon', url: 'https://www.oribehairsalon.com', reviews: 142 },
        { rank: 5, name: 'Studio 6 Salon', url: 'https://www.studio6salon.com', reviews: 128 },
        { rank: 6, name: 'Salon Expose', url: 'https://salonexpose.com', reviews: 115 },
        { rank: 7, name: 'Bella Salon', url: 'https://www.bellasalondelray.com', reviews: 98 },
        { rank: 8, name: 'Hair by Design', url: 'https://hairbydesignfl.com', reviews: 87 },
        { rank: 9, name: 'Mane Street Salon', url: 'https://www.manestreetsalon.com', reviews: 76 },
        { rank: 10, name: 'Serenity Hair Studio', url: 'https://serenityhairdelray.com', reviews: 65 }
    ];
    
    // Analyze all competitors
    async function analyzeAllCompetitors() {
        const resultsDiv = document.getElementById('competitorResults');
        resultsDiv.innerHTML = '<p class="text-center"><i class="fas fa-spinner fa-spin text-4xl text-blue-600"></i><br>Analyzing competitors...</p>';
        
        const results = [];
        
        for (let competitor of top10Competitors) {
            try {
                // Get PageSpeed data
                const data = await window.AIConfig.getPageSpeed(competitor.url);
                
                const scores = {
                    name: competitor.name,
                    rank: competitor.rank,
                    reviews: competitor.reviews,
                    url: competitor.url,
                    performance: Math.round((data.lighthouseResult?.categories?.performance?.score || 0) * 100),
                    seo: Math.round((data.lighthouseResult?.categories?.seo?.score || 0) * 100),
                    accessibility: Math.round((data.lighthouseResult?.categories?.accessibility?.score || 0) * 100),
                    bestPractices: Math.round((data.lighthouseResult?.categories?.['best-practices']?.score || 0) * 100),
                    fcp: data.lighthouseResult?.audits?.['first-contentful-paint']?.displayValue || 'N/A',
                    speedIndex: data.lighthouseResult?.audits?.['speed-index']?.displayValue || 'N/A'
                };
                
                results.push(scores);
                
            } catch (error) {
                console.error(`Error analyzing ${competitor.name}:`, error);
                results.push({
                    name: competitor.name,
                    rank: competitor.rank,
                    reviews: competitor.reviews,
                    url: competitor.url,
                    error: true
                });
            }
            
            // Small delay to avoid rate limiting
            await new Promise(resolve => setTimeout(resolve, 1000));
        }
        
        // Display results
        displayResults(results);
    }
    
    // Display analysis results
    function displayResults(results) {
        const resultsDiv = document.getElementById('competitorResults');
        resultsDiv.innerHTML = '';
        
        // Add Chris David Salon for comparison
        const ourData = {
            name: 'Chris David Salon (YOU)',
            rank: 15,
            reviews: 127,
            performance: 83,
            seo: 85,
            accessibility: 82,
            bestPractices: 80
        };
        
        results.forEach(competitor => {
            const div = document.createElement('div');
            div.className = 'bg-gray-50 p-4 rounded-lg border-2 ' + 
                           (competitor.name === 'Salon Sora' ? 'border-red-300' : 'border-gray-200');
            
            if (competitor.error) {
                div.innerHTML = `
                    <h3 class="font-bold">#${competitor.rank} - ${competitor.name}</h3>
                    <p class="text-red-600">Unable to analyze (site may block automated testing)</p>
                `;
            } else {
                const performanceColor = competitor.performance > ourData.performance ? 'text-red-600' : 'text-green-600';
                const seoColor = competitor.seo > ourData.seo ? 'text-red-600' : 'text-green-600';
                
                div.innerHTML = `
                    <div class="flex justify-between items-start mb-2">
                        <h3 class="font-bold text-lg">#${competitor.rank} - ${competitor.name}</h3>
                        <span class="text-sm bg-blue-100 text-blue-800 px-2 py-1 rounded">${competitor.reviews} reviews</span>
                    </div>
                    <div class="grid grid-cols-4 gap-2 text-sm">
                        <div>
                            <span class="text-gray-600">Performance:</span>
                            <span class="font-bold ${performanceColor} block">${competitor.performance}%</span>
                        </div>
                        <div>
                            <span class="text-gray-600">SEO:</span>
                            <span class="font-bold ${seoColor} block">${competitor.seo}%</span>
                        </div>
                        <div>
                            <span class="text-gray-600">Load Time:</span>
                            <span class="font-bold block">${competitor.fcp}</span>
                        </div>
                        <div>
                            <span class="text-gray-600">Speed Index:</span>
                            <span class="font-bold block">${competitor.speedIndex}</span>
                        </div>
                    </div>
                    ${competitor.performance > ourData.performance ? 
                        '<p class="text-xs text-red-600 mt-2">‚ö†Ô∏è They load faster than you!</p>' : 
                        '<p class="text-xs text-green-600 mt-2">‚úì You load faster!</p>'
                    }
                `;
            }
            
            resultsDiv.appendChild(div);
        });
        
        // Add summary
        const summary = document.createElement('div');
        summary.className = 'mt-6 p-4 bg-blue-50 rounded-lg';
        summary.innerHTML = `
            <h3 class="font-bold mb-2">üìä Analysis Summary</h3>
            <p>Your current position: #15 out of 47 salons</p>
            <p>To reach top 10, focus on:</p>
            <ul class="list-disc list-inside mt-2">
                <li>Increase reviews (need 50+ more)</li>
                <li>Improve page load speed</li>
                <li>Enhance local SEO signals</li>
            </ul>
        `;
        resultsDiv.appendChild(summary);
    }
    
    // Load top keywords on page load
    window.addEventListener('load', async () => {
        const keywordDiv = document.getElementById('keywordList');
        const keywords = await window.AIConfig.getTopSearches();
        
        keywords.forEach(kw => {
            const div = document.createElement('div');
            div.className = 'bg-gray-50 p-3 rounded-lg border';
            div.innerHTML = `
                <div class="font-semibold">${kw.keyword}</div>
                <div class="text-xs text-gray-600">Volume: ${kw.volume}</div>
                <div class="text-xs">Competition: <span class="${
                    kw.competition === 'Low' ? 'text-green-600' : 
                    kw.competition === 'Medium' ? 'text-yellow-600' : 
                    'text-red-600'
                }">${kw.competition}</span></div>
            `;
            keywordDiv.appendChild(div);
        });
    });
    </script>
</body>
</html>