<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <title>Progress Report - Chris David Salon SEO</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .growth-card {
            transition: transform 0.2s, box-shadow 0.2s;
        }
        .growth-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
        }
        .pulse-success {
            animation: pulse-success 2s infinite;
        }
        @keyframes pulse-success {
            0%, 100% { box-shadow: 0 0 0 0 rgba(34, 197, 94, 0.4); }
            50% { box-shadow: 0 0 0 10px rgba(34, 197, 94, 0); }
        }
    </style>
</head>
<body class="bg-gray-900 text-white min-h-screen">
    <!-- Navigation -->
    <nav class="bg-gradient-to-r from-green-900 to-emerald-900 shadow-lg">
        <div class="max-w-7xl mx-auto px-4">
            <div class="flex justify-between items-center py-4">
                <div class="flex items-center space-x-4">
                    <div class="flex items-center">
                        <div class="w-3 h-3 bg-green-400 rounded-full mr-2 pulse-success"></div>
                        <span class="font-bold text-xl">Progress Report</span>
                    </div>
                    <span id="versionBadge" class="bg-green-500 px-2 py-1 rounded text-xs font-bold">Loading...</span>
                </div>
                <div class="flex items-center space-x-4">
                    <span id="lastUpdate" class="text-sm text-green-200">Loading...</span>
                    <a href="index.html" class="bg-white/10 hover:bg-white/20 px-3 py-1 rounded text-sm">Dashboard</a>
                    <a href="../index.html" class="bg-yellow-500 hover:bg-yellow-600 px-3 py-1 rounded text-sm font-semibold">View Site</a>
                </div>
            </div>
            <div class="flex space-x-1 pb-2 overflow-x-auto">
                <a href="index.html" class="px-4 py-2 hover:bg-white/10 rounded-t">Dashboard</a>
                <a href="weekly-brain.html" class="px-4 py-2 hover:bg-white/10 rounded-t">Weekly Brain</a>
                <a href="progress-report.html" class="px-4 py-2 bg-white/20 rounded-t font-semibold">Progress Report</a>
                <a href="traffic.html" class="px-4 py-2 hover:bg-white/10 rounded-t">Traffic</a>
                <a href="rankings.html" class="px-4 py-2 hover:bg-white/10 rounded-t">Rankings</a>
            </div>
        </div>
    </nav>

    <div class="max-w-7xl mx-auto p-6">

        <!-- Hero: Growth Summary -->
        <div class="bg-gradient-to-r from-green-600 via-emerald-600 to-teal-600 rounded-2xl shadow-2xl p-8 mb-8">
            <div class="flex items-start justify-between mb-6">
                <div>
                    <h1 class="text-4xl font-bold mb-2 flex items-center gap-3">
                        <i class="fas fa-chart-line text-yellow-400"></i>
                        SEO Progress Report
                    </h1>
                    <p id="heroHeadline" class="text-green-100 text-xl">Loading growth metrics...</p>
                    <p id="periodLabel" class="text-green-200 text-sm mt-2">Calculating period...</p>
                </div>
                <div class="text-right">
                    <div class="text-sm text-green-200 mb-1">Report Generated</div>
                    <div id="reportDate" class="text-lg font-bold text-white">--</div>
                </div>
            </div>

            <!-- 4 Key Growth Metrics -->
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                <div class="growth-card bg-white/10 backdrop-blur-sm rounded-xl p-6 text-center">
                    <div class="text-green-200 text-sm mb-1">Traffic Growth</div>
                    <div id="trafficGrowth" class="text-5xl font-bold text-white">--%</div>
                    <div id="trafficLabel" class="text-sm text-green-200 mt-2">-- ‚Üí -- users</div>
                    <div id="trafficTrend" class="text-2xl mt-2">üìà</div>
                </div>
                <div class="growth-card bg-white/10 backdrop-blur-sm rounded-xl p-6 text-center">
                    <div class="text-green-200 text-sm mb-1">Authority Growth</div>
                    <div id="authorityGrowth" class="text-5xl font-bold text-white">--%</div>
                    <div id="authorityLabel" class="text-sm text-green-200 mt-2">-- ‚Üí -- score</div>
                    <div id="authorityTrend" class="text-2xl mt-2">üìà</div>
                </div>
                <div class="growth-card bg-white/10 backdrop-blur-sm rounded-xl p-6 text-center">
                    <div class="text-green-200 text-sm mb-1">New Reviews</div>
                    <div id="reviewGrowth" class="text-5xl font-bold text-white">+--</div>
                    <div id="reviewLabel" class="text-sm text-green-200 mt-2">-- ‚Üí -- reviews</div>
                    <div id="reviewTrend" class="text-2xl mt-2">üìà</div>
                </div>
                <div class="growth-card bg-white/10 backdrop-blur-sm rounded-xl p-6 text-center">
                    <div class="text-green-200 text-sm mb-1">Ranking Gain</div>
                    <div id="rankingGrowth" class="text-5xl font-bold text-white">+--</div>
                    <div id="rankingLabel" class="text-sm text-green-200 mt-2">#-- ‚Üí #-- avg</div>
                    <div id="rankingTrend" class="text-2xl mt-2">üìà</div>
                </div>
            </div>
        </div>

        <!-- Charts Section -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
            <!-- Traffic Chart -->
            <div class="bg-gray-800 rounded-xl p-6">
                <h3 class="text-xl font-bold mb-4 flex items-center gap-2">
                    <i class="fas fa-users text-blue-400"></i>
                    Traffic Over Time
                </h3>
                <canvas id="trafficChart" height="200"></canvas>
            </div>

            <!-- Authority Chart -->
            <div class="bg-gray-800 rounded-xl p-6">
                <h3 class="text-xl font-bold mb-4 flex items-center gap-2">
                    <i class="fas fa-crown text-yellow-400"></i>
                    Authority Score Over Time
                </h3>
                <canvas id="authorityChart" height="200"></canvas>
            </div>
        </div>

        <!-- Before/After Comparison -->
        <div class="bg-gray-800 rounded-xl p-6 mb-8">
            <h3 class="text-2xl font-bold mb-6 flex items-center gap-2">
                <i class="fas fa-exchange-alt text-purple-400"></i>
                Before & After Comparison
            </h3>
            <div class="overflow-x-auto">
                <table class="w-full">
                    <thead>
                        <tr class="border-b border-gray-700">
                            <th class="text-left py-3 px-4 text-gray-400">Metric</th>
                            <th class="text-center py-3 px-4 text-red-400">Before (Baseline)</th>
                            <th class="text-center py-3 px-4 text-green-400">After (Current)</th>
                            <th class="text-center py-3 px-4 text-yellow-400">Change</th>
                            <th class="text-center py-3 px-4">Trend</th>
                        </tr>
                    </thead>
                    <tbody id="comparisonTable">
                        <tr><td colspan="5" class="text-center py-8 text-gray-500">Loading comparison data...</td></tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Implementations ROI -->
        <div class="bg-gray-800 rounded-xl p-6 mb-8">
            <h3 class="text-2xl font-bold mb-6 flex items-center gap-2">
                <i class="fas fa-rocket text-orange-400"></i>
                Implementation ROI
            </h3>
            <div id="implementationsList" class="space-y-4">
                <div class="text-center py-8 text-gray-500">Loading implementations...</div>
            </div>
        </div>

        <!-- 90-Day Projections -->
        <div class="bg-gradient-to-r from-purple-900 to-indigo-900 rounded-xl p-6 mb-8">
            <h3 class="text-2xl font-bold mb-6 flex items-center gap-2">
                <i class="fas fa-crystal-ball text-purple-300"></i>
                90-Day Projections
            </h3>
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4" id="projectionsGrid">
                <div class="text-center py-8 text-purple-300">Loading projections...</div>
            </div>
            <div class="mt-6 text-sm text-purple-300">
                <i class="fas fa-info-circle mr-2"></i>
                Projections assume continued weekly SEO learning cycles and consistent optimization efforts.
            </div>
        </div>

        <!-- Learning System Status -->
        <div class="bg-gray-800 rounded-xl p-6">
            <h3 class="text-2xl font-bold mb-6 flex items-center gap-2">
                <i class="fas fa-brain text-pink-400"></i>
                Self-Learning SEO System
            </h3>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                <div class="bg-gray-900 rounded-lg p-4">
                    <div class="text-gray-400 text-sm mb-1">System Status</div>
                    <div id="systemStatus" class="text-xl font-bold text-green-400">Checking...</div>
                </div>
                <div class="bg-gray-900 rounded-lg p-4">
                    <div class="text-gray-400 text-sm mb-1">RuVector Version</div>
                    <div id="ruvectorVersion" class="text-xl font-bold text-blue-400">--</div>
                </div>
                <div class="bg-gray-900 rounded-lg p-4">
                    <div class="text-gray-400 text-sm mb-1">Next Learning Cycle</div>
                    <div id="nextCycle" class="text-xl font-bold text-yellow-400">Sunday 6 AM EST</div>
                </div>
            </div>
        </div>

    </div>

    <script>
    const API_BASE = 'https://www.chrisdavidsalon.com';

    // Load version
    async function loadVersion() {
        try {
            const res = await fetch(`${API_BASE}/data/version.json`);
            const data = await res.json();
            document.getElementById('versionBadge').textContent = `v${data.version}`;
        } catch (e) {
            document.getElementById('versionBadge').textContent = 'v?.?.?';
        }
    }

    // Load progress summary
    async function loadProgressSummary() {
        try {
            const res = await fetch(`${API_BASE}/api/progress-tracker?action=summary`);
            const data = await res.json();

            if (data.success) {
                // Update hero
                document.getElementById('heroHeadline').textContent = data.headline;
                document.getElementById('periodLabel').textContent = `${data.period.daysElapsed} days of progress (${data.period.start} ‚Üí ${data.period.end})`;
                document.getElementById('reportDate').textContent = new Date().toLocaleDateString();
                document.getElementById('lastUpdate').textContent = `Updated: ${new Date().toLocaleTimeString()}`;

                // Update growth cards
                const m = data.metrics;
                document.getElementById('trafficGrowth').textContent = `+${m.traffic.change}%`;
                document.getElementById('trafficLabel').textContent = m.traffic.label;
                document.getElementById('trafficTrend').textContent = m.traffic.trend;

                document.getElementById('authorityGrowth').textContent = `+${m.authority.change}%`;
                document.getElementById('authorityLabel').textContent = m.authority.label;
                document.getElementById('authorityTrend').textContent = m.authority.trend;

                document.getElementById('reviewGrowth').textContent = `+${m.reviews.change}`;
                document.getElementById('reviewLabel').textContent = m.reviews.label;
                document.getElementById('reviewTrend').textContent = m.reviews.trend;

                document.getElementById('rankingGrowth').textContent = `+${m.rankings.change}`;
                document.getElementById('rankingLabel').textContent = m.rankings.label;
                document.getElementById('rankingTrend').textContent = m.rankings.trend;

                // Update comparison table
                updateComparisonTable(m);
            }
        } catch (e) {
            console.error('Error loading progress:', e);
            document.getElementById('heroHeadline').textContent = 'Error loading progress data';
        }
    }

    function updateComparisonTable(metrics) {
        const tbody = document.getElementById('comparisonTable');
        tbody.innerHTML = `
            <tr class="border-b border-gray-700">
                <td class="py-3 px-4 font-semibold"><i class="fas fa-users text-blue-400 mr-2"></i>Monthly Traffic</td>
                <td class="text-center py-3 px-4 text-red-400">${metrics.traffic.before} users</td>
                <td class="text-center py-3 px-4 text-green-400">${metrics.traffic.after} users</td>
                <td class="text-center py-3 px-4 text-yellow-400 font-bold">+${metrics.traffic.change}%</td>
                <td class="text-center py-3 px-4 text-2xl">${metrics.traffic.trend}</td>
            </tr>
            <tr class="border-b border-gray-700">
                <td class="py-3 px-4 font-semibold"><i class="fas fa-crown text-yellow-400 mr-2"></i>Authority Score</td>
                <td class="text-center py-3 px-4 text-red-400">${metrics.authority.before}</td>
                <td class="text-center py-3 px-4 text-green-400">${metrics.authority.after}</td>
                <td class="text-center py-3 px-4 text-yellow-400 font-bold">+${metrics.authority.change}%</td>
                <td class="text-center py-3 px-4 text-2xl">${metrics.authority.trend}</td>
            </tr>
            <tr class="border-b border-gray-700">
                <td class="py-3 px-4 font-semibold"><i class="fas fa-star text-orange-400 mr-2"></i>Google Reviews</td>
                <td class="text-center py-3 px-4 text-red-400">${metrics.reviews.before}</td>
                <td class="text-center py-3 px-4 text-green-400">${metrics.reviews.after}</td>
                <td class="text-center py-3 px-4 text-yellow-400 font-bold">+${metrics.reviews.change}</td>
                <td class="text-center py-3 px-4 text-2xl">${metrics.reviews.trend}</td>
            </tr>
            <tr>
                <td class="py-3 px-4 font-semibold"><i class="fas fa-search text-purple-400 mr-2"></i>Avg Ranking</td>
                <td class="text-center py-3 px-4 text-red-400">#${metrics.rankings.before}</td>
                <td class="text-center py-3 px-4 text-green-400">#${metrics.rankings.after}</td>
                <td class="text-center py-3 px-4 text-yellow-400 font-bold">+${metrics.rankings.change} positions</td>
                <td class="text-center py-3 px-4 text-2xl">${metrics.rankings.trend}</td>
            </tr>
        `;
    }

    // Load charts
    async function loadCharts() {
        try {
            const res = await fetch(`${API_BASE}/api/progress-tracker?action=chart-data`);
            const data = await res.json();

            if (data.success) {
                // Traffic Chart
                new Chart(document.getElementById('trafficChart'), {
                    type: 'line',
                    data: {
                        labels: data.labels,
                        datasets: [{
                            label: 'Users',
                            data: data.datasets.traffic,
                            borderColor: '#3b82f6',
                            backgroundColor: 'rgba(59, 130, 246, 0.1)',
                            fill: true,
                            tension: 0.4
                        }]
                    },
                    options: {
                        responsive: true,
                        plugins: { legend: { display: false } },
                        scales: {
                            y: { beginAtZero: true, grid: { color: '#374151' } },
                            x: { grid: { color: '#374151' } }
                        }
                    }
                });

                // Authority Chart
                new Chart(document.getElementById('authorityChart'), {
                    type: 'line',
                    data: {
                        labels: data.labels,
                        datasets: [{
                            label: 'Authority Score',
                            data: data.datasets.authority,
                            borderColor: '#eab308',
                            backgroundColor: 'rgba(234, 179, 8, 0.1)',
                            fill: true,
                            tension: 0.4
                        }]
                    },
                    options: {
                        responsive: true,
                        plugins: { legend: { display: false } },
                        scales: {
                            y: { beginAtZero: true, grid: { color: '#374151' } },
                            x: { grid: { color: '#374151' } }
                        }
                    }
                });
            }
        } catch (e) {
            console.error('Error loading charts:', e);
        }
    }

    // Load implementations
    async function loadImplementations() {
        try {
            const res = await fetch(`${API_BASE}/api/progress-tracker?action=implementations`);
            const data = await res.json();

            if (data.success && data.implementations.length > 0) {
                const container = document.getElementById('implementationsList');
                container.innerHTML = data.implementations.map(impl => `
                    <div class="bg-gray-900 rounded-lg p-4 flex items-center justify-between">
                        <div class="flex items-center gap-4">
                            <div class="w-12 h-12 rounded-lg ${getImpactColor(impl.impact)} flex items-center justify-center">
                                <i class="fas ${getCategoryIcon(impl.category)} text-white text-xl"></i>
                            </div>
                            <div>
                                <div class="font-bold">${impl.name}</div>
                                <div class="text-sm text-gray-400">${impl.date} ‚Ä¢ ${impl.category}</div>
                            </div>
                        </div>
                        <div class="text-right">
                            <div class="text-yellow-400">${'‚≠ê'.repeat(impl.impact)}</div>
                            <div class="text-sm text-gray-400">${impl.roi}</div>
                        </div>
                    </div>
                `).join('');
            }
        } catch (e) {
            console.error('Error loading implementations:', e);
        }
    }

    function getImpactColor(impact) {
        if (impact >= 5) return 'bg-green-600';
        if (impact >= 4) return 'bg-blue-600';
        if (impact >= 3) return 'bg-yellow-600';
        return 'bg-gray-600';
    }

    function getCategoryIcon(category) {
        const icons = {
            'authority': 'fa-crown',
            'content': 'fa-file-alt',
            'tracking': 'fa-chart-bar',
            'automation': 'fa-robot',
            'ai': 'fa-brain',
            'local-seo': 'fa-map-marker-alt'
        };
        return icons[category] || 'fa-cog';
    }

    // Load projections
    async function loadProjections() {
        try {
            const res = await fetch(`${API_BASE}/api/progress-tracker?action=projections`);
            const data = await res.json();

            if (data.success) {
                const grid = document.getElementById('projectionsGrid');
                const p = data.projections['90days'];
                grid.innerHTML = `
                    <div class="bg-white/10 rounded-lg p-4 text-center">
                        <div class="text-purple-300 text-sm mb-1">Traffic Target</div>
                        <div class="text-3xl font-bold text-white">${p.traffic.target.toLocaleString()}</div>
                        <div class="text-sm text-purple-300 mt-1">${Math.round(p.traffic.confidence * 100)}% confidence</div>
                    </div>
                    <div class="bg-white/10 rounded-lg p-4 text-center">
                        <div class="text-purple-300 text-sm mb-1">Authority Target</div>
                        <div class="text-3xl font-bold text-white">${p.authority.target}</div>
                        <div class="text-sm text-purple-300 mt-1">${Math.round(p.authority.confidence * 100)}% confidence</div>
                    </div>
                    <div class="bg-white/10 rounded-lg p-4 text-center">
                        <div class="text-purple-300 text-sm mb-1">Reviews Target</div>
                        <div class="text-3xl font-bold text-white">${p.reviews.target}</div>
                        <div class="text-sm text-purple-300 mt-1">${Math.round(p.reviews.confidence * 100)}% confidence</div>
                    </div>
                    <div class="bg-white/10 rounded-lg p-4 text-center">
                        <div class="text-purple-300 text-sm mb-1">Ranking Target</div>
                        <div class="text-3xl font-bold text-white">#${p.rankings.target}</div>
                        <div class="text-sm text-purple-300 mt-1">${Math.round(p.rankings.confidence * 100)}% confidence</div>
                    </div>
                `;
            }
        } catch (e) {
            console.error('Error loading projections:', e);
        }
    }

    // Load learning system status
    async function loadLearningStatus() {
        try {
            const res = await fetch(`${API_BASE}/api/seo-learning?action=status`);
            const data = await res.json();

            if (data.success) {
                document.getElementById('systemStatus').textContent = data.status.toUpperCase();
                document.getElementById('ruvectorVersion').textContent = `v${data.version}`;
            }
        } catch (e) {
            document.getElementById('systemStatus').textContent = 'Error';
        }
    }

    // Initialize
    document.addEventListener('DOMContentLoaded', () => {
        loadVersion();
        loadProgressSummary();
        loadCharts();
        loadImplementations();
        loadProjections();
        loadLearningStatus();
    });
    </script>
</body>
</html>
